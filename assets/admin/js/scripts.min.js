"use strict";!function(t){var e=t.importButtons,n=t.ajax;if(0<e.length)for(var i=0;i<e.length;i++)e[i].addEventListener("click",r);function r(t){t.preventDefault(),function(e){e.disabled=!0;var i=e.nextElementSibling;i.style.visibility="visible";var t=new FormData;t.append("action","helsinki_import_tpr_unit"),t.append("id",e.getAttribute("data-tpr-id")),t.append("title",e.getAttribute("data-tpr-title")),function(n,r){return new Promise(function(t,e){var i=new XMLHttpRequest;i.open("POST",n),i.onload=function(){(200<=this.status&&this.status<300?t:e)(i.response)},i.onerror=function(){e({status:this.status,message:i.statusText})},i.setRequestHeader("X-Requested-With","XMLHttpRequest"),i.send(r)})}(n.ajaxUrl,t).then(function(t){t&&(t=JSON.parse(t),console.log(t.data.link_html)),i.style.visibility="hidden",e.parentElement.innerHTML=t.data.link_html}).catch(function(t){i.style.visibility="hidden",e.disabled=!1})}(t.currentTarget)}}({importButtons:document.querySelectorAll(".helsinki-tpr-import-button"),ajax:helsinkiTPR}),function(){var e,t={container:document.querySelectorAll("#helsinki-tpr-unit")}.container;if(0<t.length)for(var i=0;i<t.length;i++)!function(i){e=i.querySelectorAll(".nav-tab");var n=i.querySelector(".nav-tab-active");i.querySelectorAll(".post-tpr-data");for(var r=i.querySelector(".post-tpr-data.active"),t=0;t<e.length;t++)e[t].addEventListener("click",function(t){var e=t.currentTarget,t=i.querySelector("."+e.getAttribute("data-container"));e!=n&&(n.classList.remove("nav-tab-active"),r.classList.remove("active"),e.classList.add("nav-tab-active"),t.classList.add("active"),n=e,r=t)})}(t[i])}(),function(t){t.i18n.__;var e=t.blocks,i=e.unregisterBlockType,n=(e.unregisterBlockVariation,e.getBlockType);e.getBlockVariations;t.domReady(function(){document.querySelector("body").classList.contains("post-type-post")&&n("helsinki-tpr/unit")&&i("helsinki-tpr/unit")})}(window.wp),function(t){var r=t.i18n.__,e=t.blocks.registerBlockType,i=t.serverSideRender,n=t.blockEditor.useBlockProps,s=t.element,a=s.Fragment,o=s.createElement,l=t.components,u=l.SelectControl,c=l.CheckboxControl,h=l.TextControl,d=l.PanelRow,p=l.PanelBody,s=t.data.withSelect,l=t.compose.compose,b=t.editor.InspectorControls,k=l(s(function(t,e){return{posts:t("core").getEntityRecords("postType","helsinki_tpr_unit",{orderby:"title",order:"asc",per_page:100,status:"publish"})}}))(function(e){var i=[];return e.posts?(i.push({value:0,label:r("Select unit","helsinki-tpr")}),e.posts.forEach(function(t){i.push({value:t.id,label:t.title.rendered})})):i.push({value:0,label:r("Loading","helsinki-tpr")}),o(u,{label:r("Unit selection","helsinki-tpr"),value:e.attributes.postID,onChange:function(t){return e.setAttributes({postID:t})},options:i})});function v(t){return o(b,{},o(p,{title:r("Settings","helsinki-tpr"),initialOpen:!0},o(d,{},o(k,t)),(i={label:r("Title","helsinki-tpr"),value:t.attributes.unitTitle,attribute:"unitTitle"},n=t,o(d,{},o(h,{label:i.label,value:i.value,onChange:function(t){var e={};e[i.attribute]=t,n.setAttributes(e)}})))));var i,n}function w(i,n){return o(d,{},o(c,{label:i.label,checked:i.checked,onChange:function(t){var e={};e[i.attribute]=t,n.setAttributes(e)}}))}e("helsinki-tpr/unit",{title:r("Helsinki - Unit (TPR)","helsinki-tpr"),edit:function(t){return o(a,{},v(t),(e=t,o(b,{},o(p,{title:r("Information","helsinki-tpr"),initialOpen:!0},w({label:r("Show photo","helsinki-tpr"),checked:e.attributes.showPhoto,attribute:"showPhoto"},e),w({label:r("Show street address","helsinki-tpr"),checked:e.attributes.showStreetAddress,attribute:"showStreetAddress"},e),w({label:r("Show email","helsinki-tpr"),checked:e.attributes.showEmail,attribute:"showEmail"},e),w({label:r("Show phone","helsinki-tpr"),checked:e.attributes.showPhone,attribute:"showPhone"},e),w({label:r("Show open hours","helsinki-tpr"),checked:e.attributes.showOpenHours,attribute:"showOpenHours"},e),w({label:r("Show service language","helsinki-tpr"),checked:e.attributes.showServiceLanguage,attribute:"showServiceLanguage"},e),w({label:r("Show website","helsinki-tpr"),checked:e.attributes.showWebsite,attribute:"showWebsite"},e),w({label:r("Show postal address","helsinki-tpr"),checked:e.attributes.showPostalAddress,attribute:"showPostalAddress"},e),w({label:r("Show directions","helsinki-tpr"),checked:e.attributes.showDirections,attribute:"showDirections"},e),w({label:r("Show additional information","helsinki-tpr"),checked:e.attributes.showAdditionalInfo,attribute:"showAdditionalInfo"},e)))),(t=t,o("div",n(),o(i,{block:"helsinki-tpr/unit",attributes:t.attributes}))));var e}})}(window.wp);