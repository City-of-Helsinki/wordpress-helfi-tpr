"use strict";!function(t){var e=t.importButtons,n=t.ajax;if(0<e.length)for(var i=0;i<e.length;i++)e[i].addEventListener("click",o);function o(t){t.preventDefault(),function(e){e.disabled=!0;var i=e.nextElementSibling;i.style.visibility="visible";var t=new FormData;t.append("action","helsinki_import_tpr_unit"),t.append("id",e.getAttribute("data-tpr-id")),t.append("title",e.getAttribute("data-tpr-title")),function(n,o){return new Promise(function(t,e){var i=new XMLHttpRequest;i.open("POST",n),i.onload=function(){(200<=this.status&&this.status<300?t:e)(i.response)},i.onerror=function(){e({status:this.status,message:i.statusText})},i.setRequestHeader("X-Requested-With","XMLHttpRequest"),i.send(o)})}(n.ajaxUrl,t).then(function(t){t&&(t=JSON.parse(t),console.log(t.data.link_html)),i.style.visibility="hidden",e.parentElement.innerHTML=t.data.link_html}).catch(function(t){i.style.visibility="hidden",e.disabled=!1})}(t.currentTarget)}}({importButtons:document.querySelectorAll(".helsinki-tpr-import-button"),ajax:helsinkiTPR}),function(){var e,t={container:document.querySelectorAll("#helsinki-tpr-unit")}.container;if(0<t.length)for(var i=0;i<t.length;i++)!function(i){e=i.querySelectorAll(".nav-tab");var n=i.querySelector(".nav-tab-active");i.querySelectorAll(".post-tpr-data");for(var o=i.querySelector(".post-tpr-data.active"),t=0;t<e.length;t++)e[t].addEventListener("click",function(t){var e=t.currentTarget,t=i.querySelector("."+e.getAttribute("data-container"));e!=n&&(n.classList.remove("nav-tab-active"),o.classList.remove("active"),e.classList.add("nav-tab-active"),t.classList.add("active"),n=e,o=t)})}(t[i])}(),function(t){t.i18n.__;var e=t.blocks,i=e.unregisterBlockType,n=(e.unregisterBlockVariation,e.getBlockType);e.getBlockVariations;t.domReady(function(){document.querySelector("body").classList.contains("post-type-post")&&n("helsinki-tpr/unit")&&i("helsinki-tpr/unit")})}(window.wp),function(t){var o=t.i18n.__,e=t.blocks.registerBlockType,i=t.serverSideRender,n=t.blockEditor.useBlockProps,s=t.element,a=s.Fragment,r=s.createElement,l=t.components,u=l.SelectControl,c=l.CheckboxControl,h=l.TextControl,d=l.PanelRow,p=l.PanelBody,s=t.data.withSelect,l=t.compose.compose,b=t.editor.InspectorControls,k=l(s(function(t,e){return{posts:t("core").getEntityRecords("postType","helsinki_tpr_unit",{orderby:"title",order:"asc",per_page:100,status:"publish"})}}))(function(e){var i=[];return e.posts?(i.push({value:0,label:o("Select unit","helsinki-tpr")}),e.posts.forEach(function(t){i.push({value:t.id,label:t.title.rendered})})):i.push({value:0,label:o("Loading","helsinki-tpr")}),r(u,{label:o("Unit selection","helsinki-tpr"),value:e.attributes.postID,onChange:function(t){e.setAttributes({postID:t})},options:i})});function w(t){return r(b,{},r(p,{title:o("Settings","helsinki-tpr"),initialOpen:!0},r(d,{},r(k,t)),(i={label:o("Title","helsinki-tpr"),value:t.attributes.unitTitle,attribute:"unitTitle"},n=t,r(d,{},r(h,{label:i.label,value:i.value,onChange:function(t){var e={};e[i.attribute]=t,n.setAttributes(e)}})))));var i,n}function f(i,n){return r(d,{},r(c,{label:i.label,checked:i.checked,onChange:function(t){var e={};e[i.attribute]=t,n.setAttributes(e)}}))}e("helsinki-tpr/unit",{apiVersion:2,title:o("Helsinki - Unit (TPR)","helsinki-tpr"),category:"helsinki-tpr",icon:"building",keywords:[o("unit","helsinki-tpr"),o("tpr","helsinki-tpr"),o("Helsinki - TPR Unit","helsinki-tpr")],supports:{html:!1,anchor:!0},attributes:{postID:{type:"string",default:0},unitTitle:{type:"string",default:""},showStreetAddress:{type:"boolean",default:!0},showPostalAddress:{type:"boolean",default:!0},showPhone:{type:"boolean",default:!0},showEmail:{type:"boolean",default:!0},showDirections:{type:"boolean",default:!0},showServiceLanguage:{type:"boolean",default:!0},showOpenHours:{type:"boolean",default:!0},showWebsite:{type:"boolean",default:!0},showAdditionalInfo:{type:"boolean",default:!0},showPhoto:{type:"boolean",default:!0},anchor:{type:"string",default:""}},edit:function(t){return r(a,{},w(t),(e=t,r(b,{},r(p,{title:o("Information","helsinki-tpr"),initialOpen:!0},f({label:o("Show photo","helsinki-tpr"),checked:e.attributes.showPhoto,attribute:"showPhoto"},e),f({label:o("Show street address","helsinki-tpr"),checked:e.attributes.showStreetAddress,attribute:"showStreetAddress"},e),f({label:o("Show email","helsinki-tpr"),checked:e.attributes.showEmail,attribute:"showEmail"},e),f({label:o("Show phone","helsinki-tpr"),checked:e.attributes.showPhone,attribute:"showPhone"},e),f({label:o("Show open hours","helsinki-tpr"),checked:e.attributes.showOpenHours,attribute:"showOpenHours"},e),f({label:o("Show service language","helsinki-tpr"),checked:e.attributes.showServiceLanguage,attribute:"showServiceLanguage"},e),f({label:o("Show website","helsinki-tpr"),checked:e.attributes.showWebsite,attribute:"showWebsite"},e),f({label:o("Show postal address","helsinki-tpr"),checked:e.attributes.showPostalAddress,attribute:"showPostalAddress"},e),f({label:o("Show directions","helsinki-tpr"),checked:e.attributes.showDirections,attribute:"showDirections"},e),f({label:o("Show additional information","helsinki-tpr"),checked:e.attributes.showAdditionalInfo,attribute:"showAdditionalInfo"},e)))),(t=t,r("div",n(),r(i,{block:"helsinki-tpr/unit",attributes:t.attributes}))));var e}})}(window.wp);