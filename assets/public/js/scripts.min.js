"use strict";!function(e){var t=e.events,s=e.ajax;if(0<t.length)for(var n=0;n<t.length;n++)!function(e){e=e.querySelector(".events__more .button");e&&e.addEventListener("click",a)}(t[n]);function a(e){e.preventDefault(),function(t){t.disabled=!0;var n=t.closest(".helsinki-events").querySelector(".events__container"),e=new FormData;e.append("action",t.getAttribute("data-action")),e.append("config",parseInt(t.getAttribute("data-config"),10));var a=parseInt(t.getAttribute("data-paged"),10);e.append("paged",a),function(a,s){return new Promise(function(e,t){var n=new XMLHttpRequest;n.open("POST",a),n.onload=function(){(200<=this.status&&this.status<300?e:t)(n.response)},n.onerror=function(){t({status:this.status,message:n.statusText})},n.setRequestHeader("X-Requested-With","XMLHttpRequest"),n.send(s)})}(s.ajaxUrl,e).then(function(e){(e=e&&JSON.parse(e)).data.html?(n.insertAdjacentHTML("beforeend",e.data.html),e.data.more?(a++,t.setAttribute("data-paged",a),t.disabled=!1):t.remove()):t.remove()}).catch(function(e){t.remove()})}(e.currentTarget)}}({events:document.querySelectorAll(".helsinki-events"),ajax:helsinkiLinkedEvents});